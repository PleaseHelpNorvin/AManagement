{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport { catchError } from 'rxjs/operators';\nimport { throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${environment.apiUrl}/login`;\n  }\n  login(email, password) {\n    return this.http.post(this.apiUrl, {\n      email,\n      password\n    }).pipe(catchError(error => {\n      console.error('Login failed', error);\n      return throwError(error);\n    }));\n  }\n  saveToken(token) {\n    localStorage.setItem('authToken', token);\n  }\n  getToken() {\n    return localStorage.getItem('authToken');\n  }\n  saveRole(role) {\n    localStorage.setItem('userRole', role);\n  }\n  getRole() {\n    return localStorage.getItem('userRole');\n  }\n  isLoggedIn() {\n    return !!this.getToken();\n  }\n  isAdmin() {\n    return this.getRole() === 'admin';\n  }\n  logout() {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userRole');\n  }\n  static #_ = this.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["environment","catchError","throwError","AuthService","constructor","http","apiUrl","login","email","password","post","pipe","error","console","saveToken","token","localStorage","setItem","getToken","getItem","saveRole","role","getRole","isLoggedIn","isAdmin","logout","removeItem","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Auksilyo-01\\Desktop\\AManagement\\AManagement-frontend\\src\\app\\demo\\authentication\\login\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { throwError } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n  private apiUrl = `${environment.apiUrl}/login`;\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  login(email: string, password: string) {\r\n    return this.http.post<any>(this.apiUrl, { email, password }).pipe(\r\n      catchError(error => {\r\n        console.error('Login failed', error);\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n\r\n  saveToken(token: string) {\r\n    localStorage.setItem('authToken', token);\r\n  }\r\n\r\n  getToken(): string | null {\r\n    return localStorage.getItem('authToken');\r\n  }\r\n\r\n  saveRole(role: string) {\r\n    localStorage.setItem('userRole', role);\r\n  }\r\n\r\n  getRole(): string | null {\r\n    return localStorage.getItem('userRole');\r\n  }\r\n\r\n  isLoggedIn(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n\r\n  isAdmin(): boolean {\r\n    return this.getRole() === 'admin';\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('authToken');\r\n    localStorage.removeItem('userRole');\r\n  }\r\n}\r\n"],"mappings":"AAEA,SAASA,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,UAAU,QAAQ,gBAAgB;AAC3C,SAASC,UAAU,QAAQ,MAAM;;;AAOjC,OAAM,MAAOC,WAAW;EAItBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,MAAM,GAAG,GAAGN,WAAW,CAACM,MAAM,QAAQ;EAEN;EAExCC,KAAKA,CAACC,KAAa,EAAEC,QAAgB;IACnC,OAAO,IAAI,CAACJ,IAAI,CAACK,IAAI,CAAM,IAAI,CAACJ,MAAM,EAAE;MAAEE,KAAK;MAAEC;IAAQ,CAAE,CAAC,CAACE,IAAI,CAC/DV,UAAU,CAACW,KAAK,IAAG;MACjBC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,OAAOV,UAAU,CAACU,KAAK,CAAC;IAC1B,CAAC,CAAC,CACH;EACH;EAEAE,SAASA,CAACC,KAAa;IACrBC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEF,KAAK,CAAC;EAC1C;EAEAG,QAAQA,CAAA;IACN,OAAOF,YAAY,CAACG,OAAO,CAAC,WAAW,CAAC;EAC1C;EAEAC,QAAQA,CAACC,IAAY;IACnBL,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEI,IAAI,CAAC;EACxC;EAEAC,OAAOA,CAAA;IACL,OAAON,YAAY,CAACG,OAAO,CAAC,UAAU,CAAC;EACzC;EAEAI,UAAUA,CAAA;IACR,OAAO,CAAC,CAAC,IAAI,CAACL,QAAQ,EAAE;EAC1B;EAEAM,OAAOA,CAAA;IACL,OAAO,IAAI,CAACF,OAAO,EAAE,KAAK,OAAO;EACnC;EAEAG,MAAMA,CAAA;IACJT,YAAY,CAACU,UAAU,CAAC,WAAW,CAAC;IACpCV,YAAY,CAACU,UAAU,CAAC,UAAU,CAAC;EACrC;EAAC,QAAAC,CAAA,G;qBA1CUxB,WAAW,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAX7B,WAAW;IAAA8B,OAAA,EAAX9B,WAAW,CAAA+B,IAAA;IAAAC,UAAA,EAFV;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}