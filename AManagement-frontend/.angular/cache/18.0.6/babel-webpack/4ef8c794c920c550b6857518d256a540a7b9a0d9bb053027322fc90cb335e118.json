{"ast":null,"code":"import { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common'; // Import CommonModule\nimport { FormsModule } from '@angular/forms'; // Import FormsModule\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = () => [\"/register\"];\nfunction LoginComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMessage, \" \");\n  }\n}\nexport default class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.email = '';\n    this.password = '';\n    this.errorMessage = null;\n  }\n  onSubmit(form) {\n    if (form.valid) {\n      const {\n        email,\n        password\n      } = form.value;\n      this.authService.login(email, password).subscribe(response => {\n        // Log the response to verify structure\n        console.log('API response:', response);\n        // Access token and role from the data object\n        const token = response.data?.token;\n        const role = response.data?.role;\n        if (token && role) {\n          // Use the AuthService to save the token and role\n          this.authService.saveToken(token);\n          this.authService.saveRole(role);\n          // Redirect based on role\n          if (role === 'admin') {\n            console.log('Admin successfully logged in', response);\n            this.router.navigate(['/dashboard/default']);\n          } else {\n            console.log('User successfully logged in', response);\n            this.router.navigate(['/user-dashboard']);\n          }\n        } else {\n          console.error('Token or role not found in the response');\n          this.errorMessage = 'Login failed. Invalid response from server.';\n        }\n      }, error => {\n        console.error('Login failed', error);\n        this.errorMessage = 'Login failed. Please check your credentials and try again.';\n      });\n    }\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 45,\n    vars: 5,\n    consts: [[\"loginForm\", \"ngForm\"], [1, \"auth-main\"], [1, \"auth-wrapper\", \"v3\"], [1, \"auth-form\"], [1, \"auth-header\"], [\"href\", \"javascript:\"], [\"src\", \"assets/images/logo-dark.svg\", \"alt\", \"logo\"], [1, \"card\", \"my-5\"], [1, \"card-body\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-end\", \"mb-4\"], [1, \"mb-0\"], [1, \"link-primary\", 3, \"routerLink\"], [3, \"ngSubmit\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"Email Address\", \"required\", \"\", \"email\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-grid\", \"mt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"class\", \"alert alert-danger mt-3\", 4, \"ngIf\"], [1, \"auth-footer\", \"row\"], [1, \"col\", \"my-1\"], [1, \"m-0\"], [\"href\", \"https://codedthemes.com/\", \"target\", \"_blank\"], [1, \"col-auto\", \"my-1\"], [1, \"list-inline\", \"footer-link\", \"mb-0\"], [1, \"list-inline-item\"], [\"href\", \"https://codedthemes.com/privacy-policy/\", \"target\", \"_blank\"], [\"href\", \"https://codedthemes.support-hub.io/\", \"target\", \"_blank\"], [1, \"alert\", \"alert-danger\", \"mt-3\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4)(4, \"a\", 5);\n        i0.ɵɵelement(5, \"img\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 7)(7, \"div\", 8)(8, \"div\", 9)(9, \"h3\", 10)(10, \"b\");\n        i0.ɵɵtext(11, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"a\", 11);\n        i0.ɵɵtext(13, \"Don't have an account?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"form\", 12, 0);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_14_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const loginForm_r2 = i0.ɵɵreference(15);\n          return i0.ɵɵresetView(ctx.onSubmit(loginForm_r2));\n        });\n        i0.ɵɵelementStart(16, \"div\", 13)(17, \"label\", 14);\n        i0.ɵɵtext(18, \"Email Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"input\", 15);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_19_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.email, $event) || (ctx.email = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 16);\n        i0.ɵɵtext(22, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"input\", 17);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_23_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"div\", 18)(25, \"button\", 19);\n        i0.ɵɵtext(26, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(27, LoginComponent_div_27_Template, 2, 1, \"div\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"div\", 21)(29, \"div\", 22)(30, \"p\", 23);\n        i0.ɵɵtext(31, \" Copyright \\u00A9 \");\n        i0.ɵɵelementStart(32, \"a\", 24);\n        i0.ɵɵtext(33, \"CodedThemes\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"div\", 25)(35, \"ul\", 26)(36, \"li\", 27)(37, \"a\", 24);\n        i0.ɵɵtext(38, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"li\", 27)(40, \"a\", 28);\n        i0.ɵɵtext(41, \"Privacy Policy\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"li\", 27)(43, \"a\", 29);\n        i0.ɵɵtext(44, \"Contact us\");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c0));\n        i0.ɵɵadvance(7);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      }\n    },\n    dependencies: [RouterModule, i2.RouterLink, FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinLengthValidator, i3.EmailValidator, i3.NgModel, i3.NgForm, CommonModule, i4.NgIf],\n    styles: [\".auth-main[_ngcontent-%COMP%] {\\n  position: relative;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%] {\\n  height: 100%;\\n  width: 100%;\\n  min-height: 100vh;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: flex;\\n  align-self: center;\\n  justify-content: center;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%]:after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 50%;\\n  left: 0;\\n  width: 100%;\\n  height: 1px;\\n  background: var(--bs-border-color);\\n  z-index: 1;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .saprator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 0.875rem;\\n  padding: 8px 24px;\\n  background: #ffffff;\\n  z-index: 5;\\n  text-transform: capitalize;\\n  color: #262626;\\n  font-weight: 500;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%] {\\n  flex-direction: column;\\n  background: url('img-auth-bg.svg');\\n  min-height: 100vh;\\n  padding: 24px;\\n  background-repeat: no-repeat;\\n  background-size: auto 82%;\\n  background-position: left bottom;\\n  position: relative;\\n  justify-content: space-between;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\n  position: relative;\\n  z-index: 5;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper.v3[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]:after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: rgba(255, 255, 255, 0.2);\\n  -webkit-backdrop-filter: blur(16px);\\n          backdrop-filter: blur(16px);\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-grow: 1;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] {\\n  width: 100%;\\n  max-width: 495px;\\n  box-shadow: none;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]    + span[_ngcontent-%COMP%] {\\n  padding-left: 15px;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  text-decoration: underline;\\n}\\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%], \\n.auth-main[_ngcontent-%COMP%]   .auth-wrapper[_ngcontent-%COMP%]   .auth-header[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n\\nform[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  margin: 0px -12px 0px 0px;\\n  cursor: pointer;\\n  padding: 12px;\\n  font-size: 18px;\\n  position: absolute;\\n  top: 203px;\\n  right: 45px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGVtby9hdXRoZW50aWNhdGlvbi9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9zY3NzL3NldHRpbmdzL2NvbG9yLXZhcmlhYmxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0Usa0JBQUE7QUFERjtBQUdFO0VBQ0UsWUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtBQURKO0FBR0k7RUFDRSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0FBRE47QUFHTTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxrQ0FBQTtFQUNBLFVBQUE7QUFEUjtBQUlNO0VBQ0UsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQ3pCQTtFRDBCQSxVQUFBO0VBQ0EsMEJBQUE7RUFDQSxjQ3BCRztFRHFCSCxnQkFBQTtBQUZSO0FBTUk7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7QUFKTjtBQU1NO0VBQ0Usc0JBQUE7RUFDQSxrQ0FBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLDRCQUFBO0VBQ0EseUJBQUE7RUFDQSxnQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsOEJBQUE7QUFKUjtBQUtRO0VBQ0Usa0JBQUE7RUFDQSxVQUFBO0FBSFY7QUFLUTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxvQ0FBQTtFQUNBLG1DQUFBO1VBQUEsMkJBQUE7QUFIVjtBQU9JO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxZQUFBO0FBTE47QUFPTTtFQUNFLFdBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0FBTFI7QUFRTTtFQUNFLGtCQUFBO0FBTlI7QUFVUTtFQUNFLDBCQUFBO0FBUlY7QUFZSTs7RUFFRSxXQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsOEJBQUE7QUFWTjs7QUFlQTtFQUNFLG9CQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLHlCQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtBQVpGIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnLi4vLi4vLi4vLi4vc2Nzcy9zZXR0aW5ncy9jb2xvci12YXJpYWJsZXMuc2Nzcyc7XHJcblxyXG4uYXV0aC1tYWluIHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcblxyXG4gIC5hdXRoLXdyYXBwZXIge1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtaW4taGVpZ2h0OiAxMDB2aDtcclxuXHJcbiAgICAuc2FwcmF0b3Ige1xyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblxyXG4gICAgICAmOmFmdGVyIHtcclxuICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgdG9wOiA1MCU7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBoZWlnaHQ6IDFweDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xyXG4gICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNwYW4ge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbiAgICAgICAgcGFkZGluZzogOHB4IDI0cHg7XHJcbiAgICAgICAgYmFja2dyb3VuZDogJHdoaXRlO1xyXG4gICAgICAgIHotaW5kZXg6IDU7XHJcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgICAgICAgY29sb3I6ICRncmF5LTgwMDtcclxuICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJi52MyB7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgICAuYXV0aC1mb3JtIHtcclxuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHVybCgnLi4vLi4vLi4vLi4vYXNzZXRzL2ltYWdlcy9hdXRoZW50aWNhdGlvbi9pbWctYXV0aC1iZy5zdmcnKTtcclxuICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDtcclxuICAgICAgICBwYWRkaW5nOiAyNHB4O1xyXG4gICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgICAgICAgYmFja2dyb3VuZC1zaXplOiBhdXRvIDgyJTtcclxuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBsZWZ0IGJvdHRvbTtcclxuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgID4gKiB7XHJcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICB6LWluZGV4OiA1O1xyXG4gICAgICAgIH1cclxuICAgICAgICAmOmFmdGVyIHtcclxuICAgICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgkd2hpdGUsIDAuMik7XHJcbiAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTZweCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAuYXV0aC1mb3JtIHtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgIGZsZXgtZ3JvdzogMTtcclxuXHJcbiAgICAgIC5jYXJkIHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBtYXgtd2lkdGg6IDQ5NXB4O1xyXG4gICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGltZyArIHNwYW4ge1xyXG4gICAgICAgIHBhZGRpbmctbGVmdDogMTVweDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaDUge1xyXG4gICAgICAgIHNwYW4ge1xyXG4gICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAuYXV0aC1mb290ZXIsXHJcbiAgICAuYXV0aC1oZWFkZXIge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZm9ybSBpIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIG1hcmdpbjogMHB4IC0xMnB4IDBweCAwcHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHBhZGRpbmc6IDEycHg7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDIwM3B4O1xyXG4gIHJpZ2h0OiA0NXB4O1xyXG59XHJcbiIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyAgIExpc3Qgb2YgdmFyaWFibGVzIGZvciBQcmVzZXQgY29sb3JcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBHcmF5IGNvbG9yXHJcbiR3aGl0ZTogI2ZmZmZmZjtcclxuJGdyYXktMTAwOiAjZmFmYWZhO1xyXG4kZ3JheS0yMDA6ICNmNWY1ZjU7XHJcbiRncmF5LTMwMDogI2YwZjBmMDtcclxuJGdyYXktNDAwOiAjZDlkOWQ5O1xyXG4kZ3JheS01MDA6ICNiZmJmYmY7XHJcbiRncmF5LTYwMDogIzhjOGM4YztcclxuJGdyYXktNzAwOiAjNTk1OTU5O1xyXG4kZ3JheS04MDA6ICMyNjI2MjY7XHJcbiRncmF5LTkwMDogIzE0MTQxNDtcclxuJGJsYWNrOiAjMDAwMDAwO1xyXG5cclxuJGJsdWU6ICMxNjc3ZmY7XHJcbiRpbmRpZ286ICM2NjEwZjI7XHJcbiRwdXJwbGU6ICM2ZjQyYzE7XHJcbiRwaW5rOiAjZTgzZThjO1xyXG4kcmVkOiAjZmY0ZDRmO1xyXG4kb3JhbmdlOiAjZmQ3ZTE0O1xyXG4keWVsbG93OiAjZmFhZDE0O1xyXG4kZ3JlZW46ICM1MmM0MWE7XHJcbiR0ZWFsOiAjMjBjOTk3O1xyXG4kY3lhbjogIzEzYzJjMjtcclxuXHJcbiRibHVlLTEwMDogdGludC1jb2xvcigkYmx1ZSwgODAlKTtcclxuJGJsdWUtMjAwOiB0aW50LWNvbG9yKCRibHVlLCA2MCUpO1xyXG4kYmx1ZS0zMDA6IHRpbnQtY29sb3IoJGJsdWUsIDQwJSk7XHJcbiRibHVlLTQwMDogdGludC1jb2xvcigkYmx1ZSwgMjAlKTtcclxuJGJsdWUtNTAwOiAkYmx1ZTtcclxuJGJsdWUtNjAwOiBzaGFkZS1jb2xvcigkYmx1ZSwgMjAlKTtcclxuJGJsdWUtNzAwOiBzaGFkZS1jb2xvcigkYmx1ZSwgNDAlKTtcclxuJGJsdWUtODAwOiBzaGFkZS1jb2xvcigkYmx1ZSwgNjAlKTtcclxuJGJsdWUtOTAwOiBzaGFkZS1jb2xvcigkYmx1ZSwgODAlKTtcclxuXHJcbiRwcmVzZXQtY29sb3JzOiAoXHJcbiAgcHJlc2V0LTE6IChcclxuICAgIHByaW1hcnk6ICMxODkwZmZcclxuICApXHJcbik7XHJcbiRkYXJrLWJnLWNvbG9yOiAjMTIxMjEyO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["RouterModule","CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r2","errorMessage","LoginComponent","constructor","authService","router","email","password","onSubmit","form","valid","value","login","subscribe","response","console","log","token","data","role","saveToken","saveRole","navigate","error","_","ɵɵdirectiveInject","i1","AuthService","i2","Router","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelement","ɵɵlistener","LoginComponent_Template_form_ngSubmit_14_listener","ɵɵrestoreView","_r1","loginForm_r2","ɵɵreference","ɵɵresetView","ɵɵtwoWayListener","LoginComponent_Template_input_ngModelChange_19_listener","$event","ɵɵtwoWayBindingSet","LoginComponent_Template_input_ngModelChange_23_listener","ɵɵtemplate","LoginComponent_div_27_Template","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵtwoWayProperty","RouterLink","i3","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MinLengthValidator","EmailValidator","NgModel","NgForm","i4","NgIf","styles"],"sources":["C:\\Users\\Auksilyo-01\\Desktop\\AManagement\\AManagement-frontend\\src\\app\\demo\\authentication\\login\\login.component.ts","C:\\Users\\Auksilyo-01\\Desktop\\AManagement\\AManagement-frontend\\src\\app\\demo\\authentication\\login\\login.component.html"],"sourcesContent":["// angular import\r\nimport { Component } from '@angular/core';\r\nimport { RouterModule, Router } from '@angular/router';\r\nimport { AuthService } from './auth.service';\r\nimport { NgForm } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common'; // Import CommonModule\r\nimport { FormsModule } from '@angular/forms'; // Import FormsModule\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  standalone: true,\r\n  imports: [RouterModule, FormsModule, CommonModule],\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport default class LoginComponent {\r\n  email: string = '';\r\n  password: string = '';\r\n  errorMessage: string | null = null;\r\n\r\n  constructor(private authService: AuthService, private router: Router) { }\r\n\r\n  onSubmit(form: NgForm) {\r\n    if (form.valid) {\r\n      const { email, password } = form.value;\r\n  \r\n      this.authService.login(email, password).subscribe(\r\n        response => {\r\n          // Log the response to verify structure\r\n          console.log('API response:', response);\r\n  \r\n          // Access token and role from the data object\r\n          const token = response.data?.token;\r\n          const role = response.data?.role;\r\n  \r\n          if (token && role) {\r\n            // Use the AuthService to save the token and role\r\n            this.authService.saveToken(token);\r\n            this.authService.saveRole(role);\r\n  \r\n            // Redirect based on role\r\n            if (role === 'admin') {\r\n              console.log('Admin successfully logged in', response);\r\n              this.router.navigate(['/dashboard/default']);\r\n            } else {\r\n              console.log('User successfully logged in', response);\r\n              this.router.navigate(['/user-dashboard']);\r\n            }\r\n          } else {\r\n            console.error('Token or role not found in the response');\r\n            this.errorMessage = 'Login failed. Invalid response from server.';\r\n          }\r\n        },\r\n        error => {\r\n          console.error('Login failed', error);\r\n          this.errorMessage = 'Login failed. Please check your credentials and try again.';\r\n        }\r\n      );\r\n    }\r\n  }\r\n}\r\n","<div class=\"auth-main\">\r\n  <div class=\"auth-wrapper v3\">\r\n    <div class=\"auth-form\">\r\n      <div class=\"auth-header\">\r\n        <a href=\"javascript:\"><img src=\"assets/images/logo-dark.svg\" alt=\"logo\" /></a>\r\n      </div>\r\n      <div class=\"card my-5\">\r\n        <div class=\"card-body\">\r\n          <div class=\"d-flex justify-content-between align-items-end mb-4\">\r\n            <h3 class=\"mb-0\"><b>Login</b></h3>\r\n            <a [routerLink]=\"['/register']\" class=\"link-primary\">Don't have an account?</a>\r\n          </div>\r\n   \r\n          <form (ngSubmit)=\"onSubmit(loginForm)\" #loginForm=\"ngForm\">\r\n            <div class=\"form-group mb-3\">\r\n              <label class=\"form-label\" for=\"email\">Email Address</label>\r\n              <input \r\n                type=\"email\"\r\n                class=\"form-control\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                [(ngModel)]=\"email\"\r\n                placeholder=\"Email Address\"\r\n                required\r\n                email\r\n              />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n              <label class=\"form-label\" for=\"password\">Password</label>\r\n              <input \r\n                type=\"password\"\r\n                class=\"form-control\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                [(ngModel)]=\"password\"\r\n                placeholder=\"Password\"\r\n                required\r\n                minlength=\"6\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"d-grid mt-4\">\r\n              <button type=\"submit\" class=\"btn btn-primary\">Login</button>\r\n            </div>\r\n            \r\n            <div *ngIf=\"errorMessage\" class=\"alert alert-danger mt-3\">\r\n              {{ errorMessage }}\r\n            </div>\r\n          </form>\r\n          \r\n        </div>\r\n      </div>\r\n      <div class=\"auth-footer row\">\r\n        <div class=\"col my-1\">\r\n          <p class=\"m-0\">\r\n            Copyright ©\r\n            <a href=\"https://codedthemes.com/\" target=\"_blank\">CodedThemes</a>\r\n          </p>\r\n        </div>\r\n        <div class=\"col-auto my-1\">\r\n          <ul class=\"list-inline footer-link mb-0\">\r\n            <li class=\"list-inline-item\"><a href=\"https://codedthemes.com/\" target=\"_blank\">Home</a></li>\r\n            <li class=\"list-inline-item\"><a href=\"https://codedthemes.com/privacy-policy/\" target=\"_blank\">Privacy Policy</a></li>\r\n            <li class=\"list-inline-item\"><a href=\"https://codedthemes.support-hub.io/\" target=\"_blank\">Contact us</a></li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}